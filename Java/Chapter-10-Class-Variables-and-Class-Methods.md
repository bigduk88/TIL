# 클래스 변수와 클래스 메소드

## 목차
1. [static 선언을 붙여서 선언하는 클래스 변수](#1-static-선언을-붙여서-선언하는-클래스-변수)  
  1.1 [선언된 클래스의 모든 인스턴스가 공유하는 클래스 변수](#11-선언된-클래스의-모든-인스턴스가-공유하는-클래스-변수)  
  1.2 [클래스 변수의 접근 방법](#클래스-변수의-접근-방법)  
  1.3 [클래스 변수 접근의 예](#클래스-변수-접근의-예)  
  1.4 [클래스 변수의 초기화 시점과 초기화 방법](#클래스-변수의-초기화-시점과-초기화-방법)  
  1.5 [클래스 변수 활용의 예](#클래스-변수-활용의-예)  

2. [static 선언을 붙여서 선언하는 클래스 메소드](#2-static-선언을-붙여서-선언하는-클래스-메소드)  
3. [System.out.println() 그리고 public static void main()](#3-systemoutprintln-그리고-public-static-void-main)
4. [또 다른 용도의 static 선언](#4-또-다른-용도의-static-선언)
<br>

# 1. static 선언을 붙여서 선언하는 클래스 변수
## 1.1 클래스 변수는 언제 필요한가?
- 자바 프로그램은 클래스들로만 구성되어있다. 전부 다 클래스이다. 클래스가 아닌 것이 없다.
내가 변수, 메소드를 선언하려고 해도 클래스 안에 있어야 하고 메인 메소드까지도 클래스 안에 있어야 한다.

- 변수가 하나 필요한데, 우리가 알고있는 변수는 클래스 안에 있어야 했고 인스턴스 변수는 인스턴스를 생성할 때마다 만들어줬다.

```
class A     class B     class C     
┌────┐      ┌────┐      ┌────┐ 
│ A  │      │ B  │      │ C  │ 
└────┘      └────┘      └────┘ 
     ↓         ↓        ↓
            int num
```

- 전체 프로그램에서 하나의 변수로 선언하고, 이 변수를 전체 프로그램 모두에서 공유하고 싶을 때가 있는데, 자바는 모든 코드를 클래스로 감싸도록 되어있다.   
그렇다면 변수는 어디다가 두어야 하는가? 
<br>
<br>


## 1.2 클래스 변수는 어디에 두어야 하는가?
- 클래스 외부에 변수를 둘 수는 없다.   공유하고자 하는 int num이라는 변수도 class A, class B, class C 이 중에 한 클래스에 자리를 빌려서 들어가긴 해야한다.  

- A 클래스 진영에서만 쓸 것이라면 당연히 A에 들어가면 되지만, 공유하는 변수는 어디에 넣을 것인가?
  
- A, B, C 중에서 조금 더 연관이 깊은 클래스의 위치로 들어가면 된다.   
예를들어 A 클래스에 int num을 넣었다고 가정하자. 그렇다면 int num은 A, B, C클래스에서 공유하는 변수가 되는가?   
그렇지 않다. int num은 그냥 인스턴스 변수이다.
<br>
<br>

## 1.3 어떻게 하면 클래스 변수가 되는가?
- A 클래스에 넣어주되 **`static`** 이라는 선언을 앞에 붙여준다.  
  - **`static int num;`**

<br>
<br>

## 1.4 클래스 변수는 무엇인가?

- 코드 레벨에서 볼 때 A 클래스 안에 있으니 혼란스럽다.  
하지만 static 선언을 붙이면 인스턴스 생성과는 전혀 별개의, 하나만 존재하고 어디서나 접근이 가능한 변수의 성격을 지니게 된다. 이것이 **`클래스 변수`** 이다.
  - 인스턴스 변수는 인스턴스를 생성했을 때에 존재하게 되는 변수이다.

- 클래스 변수는, 위치는 클래스 안에 존재하지만 인스턴스 변수가 아니다. 
즉, '클래스에 종속, 위치 하는 변수다'라는 의미로써 클래스 변수라는 이름을 붙인다.   
하지만 흔히 static 변수라고 부른다.
<br>
<br>


## 1.5 선언된 클래스의 모든 인스턴스가 공유하는 클래스 변수
```java
class InstCnt {
    static int instNum = 0; // 클래스 변수(static 변수)

    InstCnt() {
        instNum++;
        System.out.println("인스턴스 생성: " + instNum);
    }
}

class CalssVar {

    public static void main(String[] args) {
        InstCnt cnt1 = new InstCnt();
        InstCnt cnt2 = new InstCnt();
        InstCnt cnt3 = new InstCnt();
    }
}
```
- static int instNum = 0;  
클래스 변수 instNum은 InstCnt 클래스랑 관련이 없다고 생각하자.   
월세를 내고 생활 하는 것처럼 뭔가 대가를 지불하고 자리를 빌려서 들어온 변수라고 이해하자.

- 그렇다면 대가는 어떤 것을 말하는가?   
월세를 내고 한 건물의 자리를 빌려 쓸 때도 그 건물에서 지켜야 하는 규칙을 준수해야 하는 것처럼, 클래스 변수도 그 클래스의 규칙을 지켜야 한다.
이 클래스에서 지시하는 접근 지시자의 규칙을 따라야한다. "뭐야 그럼 인스턴스 변수 아니야?" 라고 생각이 들수도 있지만 그렇지 않다.

- instNum++;  
생성자 안에서 클래스 변수에 이름만으로 접근 하고 있다.  
인스턴스 변수 instNum에 접근하는 것처럼 보이지만 실제로는 그렇지 않다.  
InstCnt는 자리를 빌려줬으니 직접 접근할 수 있는 권한을 획득한 것이라고 생각하자.

- InstCnt cnt1 = new InstCnt();  
메인메소드가 시행이 되면 InstCnt라는 클래스 정보가 자바가상머신에 로딩이 된다.  
로딩이 될 때 InstCnt를 자바 가상머신이 읽는데 static이 선언된 변수를 보면 인스턴스 생성을 하지 않더라도 인스턴스 생성과는 상관없이,  특정한 메모리 공간에 별도로 instNum을 저장하고
0으로 초기화를 시킨다. 

- 그리고 new InstCnt() 인스턴스를 생성하고, 인스턴스를 생성하는 과정에서 생성자가 실행이 되는데 생성자 내부에서 instNum++을 하고 있다.   
  - instNum = 0 -> 1;

- InstCnt cnt2 = new InstCnt();  
instNum = 1 -> 2

- InstCnt cnt3 = new InstCnt();  
instNum = 2 -> 3

- 세 개의 인스턴스를 생성하면서 각각의 인스턴스에서 instNum 값을 1씩 증가 시켰다.

- 자리를 빌려 들어왔기때문에 해당 클래스에서 정의하는 규칙을 따라야 한다.  
접근 수준 지시자 규칙을 지켜야 하는데, '이 클래스 내에서만 instNum 을 사용하겠다' 한다면 private으로 선언하고, '같은 패키지 범위 내에서는 접근을 허용하겠다' 한다면 default로 선언하고, '어디서든 다 접근을 하도록 하겠다' 한다면 public으로 선언한다.
<br>
<br>


## 1.6 클래스 변수의 접근 방법
- 클래스 내부 접근  
static 변수가 선언된 클래스 내에서는 이름만으로 직접 접근 가능하다.

- 클래스 외부 접근  
  - private으로 선언되지 않으면 클래스 외부에서도 접근이 가능하다.
  
  - 접근 수준 지시자가 허용하는 범위에서 접근이 가능하다.
  
  - 클래스 또는 인스턴스의 이름을 통해 접근한다.
<br>
<br>


## 1.7 클래스 변수 접근의 예
```java
class AccessWay {
    static int num = 0;

    AccessWay() {
        incrCnt();
    }

    void incrCnt() {
        num ++;   // 클래스 내부에서 이름을 통한 접근
    }
}

class ClassVarAccess {

    public static void main(String[] args) {
        AccessWay way = new AccessWay();
        way.num++;  // 외부에서 인스턴스의 이름을 통한 접근
        AccessWay.num++;  // 외부에서 클래스의 이름을 통한 접근
        System.out.println("num = " + AccessWay.num);
    }
}
```
- 두 클래스는 디폴트 패키지로 묶여있다. 같은 패키지로 묶여 있기 때문에 접근이 가능하다.

- AccessWay 클래스는 이름으로 바로 접근이  가능하다.   

- ClassVarAccess 클래스는 두 가지 방법으로 접근이 가능하다.  
인스턴스의 이름을 통해서 접근하거나 클래스의 이름을 통해 직접 접근하거나.

- 인스턴스의 이름을 통한 접근보다는 클래스의 이름을 통한 접근이 더 낫다.  
AccessWay는 클래스 이름이라는 것이 직관적으로 보이기때문에, 클래스 이름을 통해 접근하는 것을 보고 클래스 변수라는 것을 쉽게 알아차릴 수 있다.
<br>
<br>


## 1.8 클래스 변수의 초기화 시점과 초기화 방법
```java
class InstCnt {
    static int instNum = 100;  // 클래스 변수의 적절한 초기화 위치

    InstCnt() {
        instNum++;
        System.out.println("인스턴스 생성: " + instNum);
    }
}

class OnlyClassNoInstance {

    public static void main(String[] args) {
        InstCnt.instNum -= 15;  // 인스턴스 생성 없이 instNum에 접근
        System.out.println(InstCnt.instNum);
    }
}
```
### 1.8.1 초기화 방법
- 클래스 변수는 생성자 기반으로 초기화를 하면 안된다. 이 경우엔 인스턴스 생성 시마다 값이 리셋되기 때문이다. 

### 1.8.2 초기화 시점
*클래스 변수는 언제 메모리 공간에 올라가는가?*

- 자바 프로그램의 특징을 알아보자.  
프로그램을 구성하고 있는 클래스가 10개라고 가정하면, 자바 가상머신은 이 10개의 클래스 파일을 모두 한 번에 읽어들이는 것이 아니라 필요한 정보만 읽어들인다.

- 10개의 클래스로 이루어져있고, 이 중에 이번에 실행했을 때는 7개에 해당하는 클래스의  인스턴스만 생성을 했다고 한다면 필요한 시점에 7개의 클래스 정보만 읽어들인다.

- main 메소드를 실행하기 위해서는 OnlyClassNoInstance 클래스 정보를 읽어들여야한다.  
InstCnt.instNum 을 만나면 InstCnt라는 정보가 필요하다고 생각하고 그제서야 InstCnt의 정보를 읽어들인다.

- 이 때 static 으로 선언된 int instNum 이라는 변수가 있다는 사실을 캐치하고, 자바 가상머신이 관리하는 특정 메모리공간에 저 변수를 저장하고, 100으로 초기화 시킨다. 
<br>
<br>


## 1.9 클래스 변수 활용의 예
```java
class Circle {
    static final double PI = 3.1415;
    private double radius;

    Circle(double rad) {
        radius = rad;
    }

    void showPerimeter() {
        double peri = (radius * 2) * PI;
        System.out.println("둘레: " + peri);
    }

    void showArea() {
        double area = (radis * radius) * PI;
        System.out.println("넓이: " + area);
    }
}
```
- 원주율 값이라는 건 다른 영역에서도 필요하다.  
하지만 인스턴스를 생성하면 되기때문에 static 선언을 빼도 코드는 잘 돌아간다.  
하지만 인스턴스 별로 원주율 값을 가지고 있을 필요가 없다. PI값을 바꿀 필요가 없기 때문이다.

- 상황, 환경에따라 값을 바꿔야 된다고 가정해보자.  
날씨 정보가 실시간으로 업데이트 되고, 각 인스턴스들이 이 정보를 참조해야 된다면 인스턴스에서 변수를 각각 가지고 있는 것보다 하나에서만 참조 되는 값을 수정하고, 이 수정되는 값들을 가져가는 것이 더 효율적이다.

- 인스턴스 별로 가지고 있을 필요가 없는 변수
  - 값의 참조가 목적인 변수
  - 값의 공유가 목적인 변수
  
- 그리고 그 값이 외부에서도 참조하는 값이라면 public으로 선언한다.
<br>
<br>


# 2. static 선언을 붙여서 선언하는 클래스 메소드
# 3. System.out.println() 그리고 public static void main()
# 4. 또 다른 용도의 static 선언
